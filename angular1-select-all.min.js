/*

 angular1-select-all module.
 @version 1.0.0
 @link https://manikantag/github.io/angular1-select-all
 @author Manikanta G
 @license MIT License, http://www.opensource.org/licenses/MIT
*/
(function(){angular.module("angular1-select-all",[]).value("mgCbSelectAllConfig",{memberModelKey:"__selected"}).directive("mgCbGroup",function(){return{scope:{},restrict:"AE",controller:["$scope",function(e){var a;e.$on("$destroy",function(){a=null});return{notify:function(d,b){a&&a(d,b)},subscribe:function(d){a=d}}}]}}).directive("mgCbSelectAll",["$timeout","mgCbSelectAllConfig",function(e,a){var d=a.memberModelKey||"__selected";return{scope:{mgCbSelectAll:"=",mgCbSelectedCount:"=",ngModel:"="},
restrict:"AE",require:["ngModel","^mgCbGroup"],link:function(b,a,k,g){function m(f){var a,c=b.mgCbSelectAll.length;for(a=0;a<c;a++)b.mgCbSelectAll[a][d]=f;b.mgCbSelectedCount=f?c:0}function n(){var f,a=b.mgCbSelectAll.length,c=0;for(f=0;f<a;f++)b.mgCbSelectAll[f][d]&&c++;return c}var c=g[0];a=g[1];var h=!0;e(function(){b.mgCbSelectedCount=n()});a.subscribe(function(a,c){b.$apply(function(){b.ngModel={bymgCbMember:!0}})});c.$parsers.push(function(a){h||m(a);h&&(h=!1);return a});c.$formatters.push(function(a){if(a||
!h)angular.isObject(a)&&a.bymgCbMember?(b.mgCbSelectedCount=n(),a=b.mgCbSelectAll.length?b.mgCbSelectedCount===b.mgCbSelectAll.length:!1,c.$modelValue=a,b.ngModel=a):m(a);h&&(h=!1);return a});b.$watch("mgCbSelectAll.length",function(a){b.ngModel={bymgCbMember:!0};c.$render()})}}}]).directive("mgCbMember",["$parse","$timeout",function(e,a){return{scope:{},restrict:"AE",require:["ngModel","^mgCbGroup"],link:function(d,b,l,k){b=k[0];var g=k[1];l.mgCbMemberIndex&&e(l.mgCbMemberIndex)(d.$parent);b.$parsers.push(function(b){a(function(){g.notify("mgCbMember")});
return b})}}}]).directive("mgCbClear",["mgCbSelectAllConfig",function(e){var a=e.memberModelKey||"__selected";return{scope:{mgCbMembers:"=mgCbClear"},restrict:"AE",require:["^mgCbGroup"],link:function(d,b,e,k){var g=k[0];if(d.mgCbMembers)b.on("click",function(){var b=d.mgCbMembers,e=b.length,c;d.$apply(function(){for(c=0;c<e;c++)b[c][a]&&(b[c][a]=!1)});g.notify("mgCbClear")})}}}])})();